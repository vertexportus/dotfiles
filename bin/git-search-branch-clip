#!/usr/bin/env bash
if [[ $1 == '-r' ]]; then
    search_value=$2
    r="-r"
else
    search_value=$1
    r=""
fi

branches=($(git branch ${r} | grep $search_value | tr -d '*' | tr -d ' '))
len=${#branches[@]}

if [ $len -eq 0 ]; then
    echo "no branch found"
elif [ $len -lt 2 ]; then
    echo $branches
    echo $branches | tr -d '\n' | xclip -selection c
else
    for index in ${!branches[@]}; do
        echo ' ' $((index+1))')' "${branches[index]}"
    done
    read -n 1 -s choice
    choice=$((choice-1))
    echo ${branches[$choice]}
    echo ${branches[$choice]} | tr -d '\n' | xclip -selection c
fi
